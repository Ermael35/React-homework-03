{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const __getTodos = createAsyncThunk(\"todos/getTodos\", async (payload, thunkAPI) => {\n  try {\n    const data = await axios.get(\"http://localhost:3001/todos\", payload);\n    console.log(data);\n    return thunkAPI.fulfillWithValue(data.data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nexport const todosSlice = createSlice({\n  name: \"todos\",\n  initialState: {\n    todos: [],\n    isLoading: false,\n    error: null\n  },\n  reducers: {\n    addTodo(state, action) {\n      state.todos.push(action.payload);\n      console.log(action, payload);\n      axios.post(\"http://localhost:3001/todos\", action.payload);\n    },\n\n    deleteTodo(state, action) {\n      let index = state.findIndex(todo => todo.id === action.payload);\n      state.todos.splice(index, 1);\n      axios.delete(`http://localhost:3001/todos/${action.payload}`);\n    },\n\n    updateTodo(state, action) {\n      let index = state.findIndex(todo => todo.id === action.payload.id);\n      state.todos.splice(index, 1, action.payload);\n      axios.patch(`http://localhost:3001/todos/${action.payload.id}`, action.payload);\n    },\n\n    extraReducers: {\n      [__getTodos.pending]: state => {\n        state.isLoading = true; // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n      },\n      [__getTodos.fulfilled]: (state, action) => {\n        state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n\n        state.todos = action.payload; // Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n      },\n      [__getTodos.rejected]: (state, action) => {\n        state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n\n        state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n      }\n    }\n  }\n});\nexport const {\n  addTodo,\n  deleteTodo,\n  updateTodo\n} = todosSlice.actions;\nexport default todosSlice;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","__getTodos","payload","thunkAPI","data","get","console","log","fulfillWithValue","error","rejectWithValue","todosSlice","name","initialState","todos","isLoading","reducers","addTodo","state","action","push","post","deleteTodo","index","findIndex","todo","id","splice","delete","updateTodo","patch","extraReducers","pending","fulfilled","rejected","actions"],"sources":["/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/src/redux/modules/todo.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\"; \n\n\nexport const __getTodos = createAsyncThunk(\n  \"todos/getTodos\",\n  async (payload, thunkAPI) => {\n    try {\n      const data = await axios.get(\"http://localhost:3001/todos\",payload);\n      console.log(data)\n      return thunkAPI.fulfillWithValue(data.data);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\nexport const todosSlice = createSlice({\n  name: \"todos\",\n  initialState:{\n    todos:[],\n    isLoading:false,\n    error:null,\n  \n},\n\n  reducers: {\n    addTodo(state, action) {\n      state.todos.push(action.payload)\n      console.log(action,payload)\n      axios.post(\"http://localhost:3001/todos\", action.payload );\n    },\n    deleteTodo(state, action) {\n      let index = state.findIndex((todo) => todo.id === action.payload);\n      state.todos.splice(index, 1);\n      axios.delete(`http://localhost:3001/todos/${action.payload}`);\n    },\n    updateTodo(state, action){\n      let  index = state.findIndex((todo) =>  todo.id === action.payload.id);\n      state.todos.splice(index, 1, action.payload);\n      axios.patch(`http://localhost:3001/todos/${action.payload.id}`, action.payload);\n    },\n\n     extraReducers: {\n    [__getTodos.pending]: (state) => {\n      state.isLoading = true;\n      \n      // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n    },\n    [__getTodos.fulfilled]: (state, action) => {\n      state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.todos = action.payload; // Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n    },\n    [__getTodos.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    },\n  },\n  },\n});\n\nexport const { addTodo, deleteTodo, updateTodo } = todosSlice.actions;\nexport default todosSlice;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}