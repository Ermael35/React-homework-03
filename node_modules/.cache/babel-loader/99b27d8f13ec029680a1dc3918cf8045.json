{"ast":null,"code":"import _defineProperty from\"/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import axios from\"axios\";export var __getTodos=createAsyncThunk(\"todos/getTodos\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload,thunkAPI){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:3001/todos\",payload);case 3:data=_context.sent;console.log(data);return _context.abrupt(\"return\",thunkAPI.fulfillWithValue(data.data));case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",thunkAPI.rejectWithValue(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var todosSlice=createSlice({name:\"todos\",initialState:{todos:[],isLoading:false,error:null},reducers:{addTodo:function addTodo(state,action){state.todos.push(action.payload);axios.post(\"http://localhost:3001/todos\",action.payload);},deleteTodo:function deleteTodo(state,action){var index=state.findIndex(function(todo){return todo.id===action.payload;});state.todos.splice(index,1);axios.delete(\"http://localhost:3001/todos/\".concat(action.payload));},updateTodo:function updateTodo(state,action){var index=state.findIndex(function(todo){return todo.id===action.payload.id;});state.todos.splice(index,1,action.payload);axios.patch(\"http://localhost:3001/todos/\".concat(action.payload.id),action.payload);}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,__getTodos.pending,function(state){state.isLoading=true;// 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n}),_defineProperty(_extraReducers,__getTodos.fulfilled,function(state,action){state.isLoading=false;// 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.todos=action.payload;// Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n}),_defineProperty(_extraReducers,__getTodos.rejected,function(state,action){state.isLoading=false;// 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.error=action.payload;// catch 된 error 객체를 state.error에 넣습니다.\n}),_extraReducers)});var _todosSlice$actions=todosSlice.actions,addTodo=_todosSlice$actions.addTodo,deleteTodo=_todosSlice$actions.deleteTodo,updateTodo=_todosSlice$actions.updateTodo;export{addTodo,deleteTodo,updateTodo};export default todosSlice;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","__getTodos","payload","thunkAPI","get","data","console","log","fulfillWithValue","rejectWithValue","todosSlice","name","initialState","todos","isLoading","error","reducers","addTodo","state","action","push","post","deleteTodo","index","findIndex","todo","id","splice","delete","updateTodo","patch","extraReducers","pending","fulfilled","rejected","actions"],"sources":["/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/src/redux/modules/todo.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\"; \n\n\nexport const __getTodos = createAsyncThunk(\n  \"todos/getTodos\",\n  async (payload, thunkAPI) => {\n    try {\n      const data = await axios.get(\"http://localhost:3001/todos\",payload);\n      console.log(data)\n      return thunkAPI.fulfillWithValue(data.data);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\nexport const todosSlice = createSlice({\n  name: \"todos\",\n  initialState:{\n    todos:[],\n    isLoading:false,\n    error:null,\n  \n},\n\n  reducers: {\n    addTodo(state, action) {\n      state.todos.push(action.payload)\n      axios.post(\"http://localhost:3001/todos\", action.payload );\n    },\n    deleteTodo(state, action) {\n      let index = state.findIndex((todo) => todo.id === action.payload);\n      state.todos.splice(index, 1);\n      axios.delete(`http://localhost:3001/todos/${action.payload}`);\n    },\n    updateTodo(state, action){\n      let  index = state.findIndex((todo) =>  todo.id === action.payload.id);\n      state.todos.splice(index, 1, action.payload);\n      axios.patch(`http://localhost:3001/todos/${action.payload.id}`, action.payload);\n    },\n  },\n     extraReducers: {\n    [__getTodos.pending]: (state) => {\n      state.isLoading = true;\n      \n      // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n    },\n    [__getTodos.fulfilled]: (state, action) => {\n      state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.todos = action.payload; // Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n    },\n    [__getTodos.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    },\n  },\n});\n\nexport const { addTodo, deleteTodo, updateTodo } = todosSlice.actions;\nexport default todosSlice\n"],"mappings":"ueAAA,OAASA,gBAAT,CAA2BC,WAA3B,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAGA,MAAO,IAAMC,WAAU,CAAGH,gBAAgB,CACxC,gBADwC,4FAExC,iBAAOI,OAAP,CAAgBC,QAAhB,mKAEuBH,MAAK,CAACI,GAAN,CAAU,6BAAV,CAAwCF,OAAxC,CAFvB,QAEUG,IAFV,eAGIC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAHJ,gCAIWF,QAAQ,CAACK,gBAAT,CAA0BH,IAAI,CAACA,IAA/B,CAJX,0FAMWF,QAAQ,CAACM,eAAT,aANX,sEAFwC,mEAAnC,CAYP,MAAO,IAAMC,WAAU,CAAGX,WAAW,CAAC,CACpCY,IAAI,CAAE,OAD8B,CAEpCC,YAAY,CAAC,CACXC,KAAK,CAAC,EADK,CAEXC,SAAS,CAAC,KAFC,CAGXC,KAAK,CAAC,IAHK,CAFuB,CASpCC,QAAQ,CAAE,CACRC,OADQ,kBACAC,KADA,CACOC,MADP,CACe,CACrBD,KAAK,CAACL,KAAN,CAAYO,IAAZ,CAAiBD,MAAM,CAACjB,OAAxB,EACAF,KAAK,CAACqB,IAAN,CAAW,6BAAX,CAA0CF,MAAM,CAACjB,OAAjD,EACD,CAJO,CAKRoB,UALQ,qBAKGJ,KALH,CAKUC,MALV,CAKkB,CACxB,GAAII,MAAK,CAAGL,KAAK,CAACM,SAAN,CAAgB,SAACC,IAAD,QAAUA,KAAI,CAACC,EAAL,GAAYP,MAAM,CAACjB,OAA7B,EAAhB,CAAZ,CACAgB,KAAK,CAACL,KAAN,CAAYc,MAAZ,CAAmBJ,KAAnB,CAA0B,CAA1B,EACAvB,KAAK,CAAC4B,MAAN,uCAA4CT,MAAM,CAACjB,OAAnD,GACD,CATO,CAUR2B,UAVQ,qBAUGX,KAVH,CAUUC,MAVV,CAUiB,CACvB,GAAKI,MAAK,CAAGL,KAAK,CAACM,SAAN,CAAgB,SAACC,IAAD,QAAWA,KAAI,CAACC,EAAL,GAAYP,MAAM,CAACjB,OAAP,CAAewB,EAAtC,EAAhB,CAAb,CACAR,KAAK,CAACL,KAAN,CAAYc,MAAZ,CAAmBJ,KAAnB,CAA0B,CAA1B,CAA6BJ,MAAM,CAACjB,OAApC,EACAF,KAAK,CAAC8B,KAAN,uCAA2CX,MAAM,CAACjB,OAAP,CAAewB,EAA1D,EAAgEP,MAAM,CAACjB,OAAvE,EACD,CAdO,CAT0B,CAyBjC6B,aAAa,mDACb9B,UAAU,CAAC+B,OADE,CACQ,SAACd,KAAD,CAAW,CAC/BA,KAAK,CAACJ,SAAN,CAAkB,IAAlB,CAEA;AACD,CALa,iCAMbb,UAAU,CAACgC,SANE,CAMU,SAACf,KAAD,CAAQC,MAAR,CAAmB,CACzCD,KAAK,CAACJ,SAAN,CAAkB,KAAlB,CAAyB;AACzBI,KAAK,CAACL,KAAN,CAAcM,MAAM,CAACjB,OAArB,CAA8B;AAC/B,CATa,iCAUbD,UAAU,CAACiC,QAVE,CAUS,SAAChB,KAAD,CAAQC,MAAR,CAAmB,CACxCD,KAAK,CAACJ,SAAN,CAAkB,KAAlB,CAAyB;AACzBI,KAAK,CAACH,KAAN,CAAcI,MAAM,CAACjB,OAArB,CAA8B;AAC/B,CAba,iBAzBoB,CAAD,CAA9B,CA0CA,wBAA4CQ,UAAU,CAACyB,OAAvD,CAAQlB,OAAR,qBAAQA,OAAR,CAAiBK,UAAjB,qBAAiBA,UAAjB,CAA6BO,UAA7B,qBAA6BA,UAA7B,C,sCACP,cAAenB,WAAf"},"metadata":{},"sourceType":"module"}