{"ast":null,"code":"import _defineProperty from\"/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import axios from'axios';export var __getComments=createAsyncThunk(\"comments/getComments\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload,thunkAPI){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:3001/comments\");case 3:data=_context.sent;return _context.abrupt(\"return\",thunkAPI.fulfillWithValue(data.data));case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",thunkAPI.rejectWithValue(_context.t0));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var commen=createSlice({name:\"commen\",initialState:{comments:[],isLoading:false,error:null},reducers:{addComment:function addComment(state,action){state.comments.push(action.payload);axios.post(\"http://localhost:3001/comments\",action.payload);},deleteComment:function deleteComment(state,action){var index=state.comments.findIndex(function(comment){return comment.id===action.payload;});state.comments.splice(index,1);axios.delete(\"http://localhost:3001/comments/\".concat(action.payload));},updateComment:function updateComment(state,action){var index=state.comments.findIndex(function(post){return post.id===action.payload.id;});state.comments.splice(index,1,action.payload);axios.patch(\"http://localhost:3001/comments/\".concat(action.payload.id),action.payload);}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,__getComments.pending,function(state){state.isLoading=true;// 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n}),_defineProperty(_extraReducers,__getComments.fulfilled,function(state,action){state.isLoading=false;// 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.comments=action.payload;// Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n}),_defineProperty(_extraReducers,__getComments.rejected,function(state,action){state.isLoading=false;// 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\nstate.error=action.payload;// catch 된 error 객체를 state.error에 넣습니다.\n}),_extraReducers)});var _commen$actions=commen.actions,addComment=_commen$actions.addComment,deleteComment=_commen$actions.deleteComment,updateComment=_commen$actions.updateComment;export{addComment,deleteComment,updateComment};export default commen;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","__getComments","payload","thunkAPI","get","data","fulfillWithValue","rejectWithValue","commen","name","initialState","comments","isLoading","error","reducers","addComment","state","action","push","post","deleteComment","index","findIndex","comment","id","splice","delete","updateComment","patch","extraReducers","pending","fulfilled","rejected","actions"],"sources":["/Users/lenkokukyojulo/Desktop/sparta_react/com/React-homework-03/src/redux/modules/comments.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n\nexport const __getComments = createAsyncThunk(\n  \"comments/getComments\",\n  async (payload, thunkAPI) => {\n      try {\n          const data =  await axios.get(\"http://localhost:3001/comments\");\n          return thunkAPI.fulfillWithValue(data.data);\n        } catch (error) {\n          return thunkAPI.rejectWithValue(error);\n        }\n  }\n);\n\nexport const commen = createSlice({\n  name: \"commen\",\n  initialState: {\n    comments: [],\n    isLoading: false,\n        error: null,\n  },\n  reducers: {\n    addComment (state, action)  {\n      state.comments.push(action.payload)\n      axios.post(\"http://localhost:3001/comments\",action.payload );\n    },\n    deleteComment (state, action) {\n      let index = state.comments.findIndex(comment=>comment.id === action.payload);\n      state.comments.splice(index,1);\n      axios.delete(`http://localhost:3001/comments/${action.payload}`);\n    },\n    updateComment(state, action) {\n      let index = state.comments.findIndex(post=>post.id === action.payload.id);\n                    state.comments.splice(index,1,action.payload)\n    axios.patch(`http://localhost:3001/comments/${action.payload.id}`, action.payload);\n    }\n    \n  },\n  extraReducers: {\n    [__getComments.pending]: (state) => {\n      state.isLoading = true; // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n    },\n    [__getComments.fulfilled]: (state, action) => {\n      state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.comments = action.payload; // Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n    },\n    [__getComments.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    },\n  },\n  \n});\n\n\nexport const { addComment ,deleteComment, updateComment} = commen.actions;\nexport default commen;"],"mappings":"ueAAA,OAASA,gBAAT,CAA2BC,WAA3B,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAGA,MAAO,IAAMC,cAAa,CAAGH,gBAAgB,CAC3C,sBAD2C,4FAE3C,iBAAOI,OAAP,CAAgBC,QAAhB,mKAE4BH,MAAK,CAACI,GAAN,CAAU,gCAAV,CAF5B,QAEcC,IAFd,+CAGeF,QAAQ,CAACG,gBAAT,CAA0BD,IAAI,CAACA,IAA/B,CAHf,0FAKeF,QAAQ,CAACI,eAAT,aALf,sEAF2C,mEAAtC,CAYP,MAAO,IAAMC,OAAM,CAAGT,WAAW,CAAC,CAChCU,IAAI,CAAE,QAD0B,CAEhCC,YAAY,CAAE,CACZC,QAAQ,CAAE,EADE,CAEZC,SAAS,CAAE,KAFC,CAGRC,KAAK,CAAE,IAHC,CAFkB,CAOhCC,QAAQ,CAAE,CACRC,UADQ,qBACIC,KADJ,CACWC,MADX,CACoB,CAC1BD,KAAK,CAACL,QAAN,CAAeO,IAAf,CAAoBD,MAAM,CAACf,OAA3B,EACAF,KAAK,CAACmB,IAAN,CAAW,gCAAX,CAA4CF,MAAM,CAACf,OAAnD,EACD,CAJO,CAKRkB,aALQ,wBAKOJ,KALP,CAKcC,MALd,CAKsB,CAC5B,GAAII,MAAK,CAAGL,KAAK,CAACL,QAAN,CAAeW,SAAf,CAAyB,SAAAC,OAAO,QAAEA,QAAO,CAACC,EAAR,GAAeP,MAAM,CAACf,OAAxB,EAAhC,CAAZ,CACAc,KAAK,CAACL,QAAN,CAAec,MAAf,CAAsBJ,KAAtB,CAA4B,CAA5B,EACArB,KAAK,CAAC0B,MAAN,0CAA+CT,MAAM,CAACf,OAAtD,GACD,CATO,CAURyB,aAVQ,wBAUMX,KAVN,CAUaC,MAVb,CAUqB,CAC3B,GAAII,MAAK,CAAGL,KAAK,CAACL,QAAN,CAAeW,SAAf,CAAyB,SAAAH,IAAI,QAAEA,KAAI,CAACK,EAAL,GAAYP,MAAM,CAACf,OAAP,CAAesB,EAA7B,EAA7B,CAAZ,CACcR,KAAK,CAACL,QAAN,CAAec,MAAf,CAAsBJ,KAAtB,CAA4B,CAA5B,CAA8BJ,MAAM,CAACf,OAArC,EAChBF,KAAK,CAAC4B,KAAN,0CAA8CX,MAAM,CAACf,OAAP,CAAesB,EAA7D,EAAmEP,MAAM,CAACf,OAA1E,EACC,CAdO,CAPsB,CAwBhC2B,aAAa,mDACV5B,aAAa,CAAC6B,OADJ,CACc,SAACd,KAAD,CAAW,CAClCA,KAAK,CAACJ,SAAN,CAAkB,IAAlB,CAAwB;AACzB,CAHU,iCAIVX,aAAa,CAAC8B,SAJJ,CAIgB,SAACf,KAAD,CAAQC,MAAR,CAAmB,CAC5CD,KAAK,CAACJ,SAAN,CAAkB,KAAlB,CAAyB;AACzBI,KAAK,CAACL,QAAN,CAAiBM,MAAM,CAACf,OAAxB,CAAiC;AAClC,CAPU,iCAQVD,aAAa,CAAC+B,QARJ,CAQe,SAAChB,KAAD,CAAQC,MAAR,CAAmB,CAC3CD,KAAK,CAACJ,SAAN,CAAkB,KAAlB,CAAyB;AACzBI,KAAK,CAACH,KAAN,CAAcI,MAAM,CAACf,OAArB,CAA8B;AAC/B,CAXU,iBAxBmB,CAAD,CAA1B,CAyCA,oBAAoDM,MAAM,CAACyB,OAA3D,CAAQlB,UAAR,iBAAQA,UAAR,CAAoBK,aAApB,iBAAoBA,aAApB,CAAmCO,aAAnC,iBAAmCA,aAAnC,C,+CACP,cAAenB,OAAf"},"metadata":{},"sourceType":"module"}